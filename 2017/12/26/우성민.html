<!DOCTYPE html>
<html lang="en">

  <script language='javascript'>
var url = 'http://blog.hibrainapps.net'+''
var pageType = '-1';
var typeValue = '-1';

function getTypeValue(){

    var hashes = window.location.href.slice(0, window.location.href.indexOf('?')).split('/');
    var pageNum = getParameter('page');

    if(hashes.length == 7 && ( hashes[4] == 'tags' || hashes[4] == 'category' ) && pageNum != undefined) {
      pageType = hashes[4];
      typeValue = hashes[5];
      window.location.replace(url + '/' + pageType + '/' + typeValue + '/page/' + pageNum);
    }

    if(hashes.length == 5 && pageNum != undefined) {
      pageType = hashes[4];
      typeValue = hashes[5];
      window.location.replace(url + '/page/' + pageNum);
    }

}


function getParameter(param) {
    var returnValue;
    var url = location.href;
    var parameters = (url.slice(url.indexOf('?') + 1, url.length)).split('&');
    for (var i = 0; i < parameters.length; i++) {
        var varName = parameters[i].split('=')[0];
        if (varName.toUpperCase() == param.toUpperCase()) {
            returnValue = parameters[i].split('=')[1];
            return decodeURIComponent(returnValue);
        }
    }
};

getTypeValue();
</script>
<head>


  <meta name="google-site-verification" content="QV72Qd0YOcS2xQ5zCzzQ-IKBHBor7lGSG3LBFmbE6Eo" />

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="fb:app_id" content="147895112528926" />
  <meta property="fb:admins" content="100001627773972"/>
  <title>Visitor Pattern</title>
  <meta name="description" content="방문자 패턴(Visitor Pattern)이란? Visitor는 사전적인 의미로 어떤 사람이나 장소를 찾아오는 사람 이라는 의미를 가지고 있다. 방문자 패턴에서는 데이터 구조와 처리를 분리한다. 데이터 구조 안을 돌아다니는 주체인 방문자 를 나타내는 클래스를 준비해서 그 클래스에게...">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://blog.hibrainapps.net/2017/12/26/%EC%9A%B0%EC%84%B1%EB%AF%BC.html">
  <link rel="alternate" type="application/rss+xml" title="하이브레인넷 부설연구소" href="/feed.xml">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-18071244-5', 'auto');
  ga('send', 'pageview');

</script>
  

  

</head>


  <body>

    <header class="site-header" role="banner">

  <div class="w3-top">
    <div class="w3-bar w3-white w3-card " style="letter-spacing:4px;">
    
    
    <a class="w3-bar-item site-title w3-mobile" href="/">하이브레인넷 부설연구소</a>

	<!--search bar and button-->
	<form class="w3-bar-item w3-right w3-mobile" action="http://blog.hibrainapps.net/result/">
		 <input class="w3-input w3-bar-item w3-xlarge" id="q" name="q" type="text" placeholder="검색">
		  <input type="hidden" name="filter" value="0" />
         <button class="w3-button w3-xlarge w3-bar-item"><i class="fa fa-search" aria-hidden="true"></i></button>
	</form>

    
      <nav class="site-nav w3-bar-item">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
	    
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          <a class="page-link w3-wide" href="/index/">홈</a>
          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          <a class="page-link w3-wide" href="/tags/">태그</a>
          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          <a class="page-link w3-wide" href="/guestbook/">방명록</a>
          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
        </div>
      </nav>


    
  </div>

</div>

</header>

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    

    <h1 class="post-title" itemprop="name headline">Visitor Pattern</h1>
    <p class="post-meta">
      <time datetime="2017-12-26T00:00:00+00:00" itemprop="datePublished">
        
        <span class="post-meta w3-text-grey"><i class="fa fa-clock-o" aria-hidden="true"></i> 2017.12.26</span>
      </time>
  </header>

  <div class="post-content" itemprop="articleBody">
    <h1 id="방문자-패턴visitor-pattern이란">방문자 패턴(Visitor Pattern)이란?</h1>
<p>Visitor는 사전적인 의미로 <strong>어떤 사람이나 장소를 찾아오는 사람</strong> 이라는 의미를 가지고 있다.
방문자 패턴에서는 데이터 구조와 처리를 분리한다. 데이터 구조 안을 돌아다니는 주체인 <strong>방문자</strong> 를 나타내는 클래스를 준비해서 그 클래스에게 처리를 맡긴다. 새로운 처리를 추가하고 싶을 땐 새로운 <strong>방문자</strong> 를 만들고 데이터 구조는 문들 두드리는 <strong>방문자</strong> 를 받아들이면 된다.</p>

<p>방문자 패턴은 <strong>개방-폐쇄 원칙(The Open-Closed Principle : OCP)</strong> 을 적용하는 방법 중 하나다.</p>

<p>##개방-폐쇄 원칙의 두 가지 속성
####확장에 대해서는 열려있지만 수정에 대해서는 닫혀있어야 한다.</p>

<p>####확장에 대해 열려 있다.
클래스를 설계할 때에 특별한 이유가 없는 한 장래의 확장을 허락해야 한다. 이유 없이 확장을 금지해서는 안되는 것이 <strong>확장에 대해서는 열려있다</strong> 라는 의미다.</p>

<p>####수정에 대해 닫혀 있다
확장할 때마다 기존의 클래스를 수정하는 것은 곤란하다. 확장을 하더라도 기존의 클래스는 수정할 필요가 없는 것이 <strong>수정에 대허서는 닫혀있다</strong> 라는 의미다.</p>

<p><br /></p>

<h1 id="방문자-패턴에-사용되는-역할">방문자 패턴에 사용되는 역할</h1>

<p><img src="https://farm5.staticflickr.com/4738/39312549112_bce2c9b763_b.jpg" alt="flickr" /></p>

<h3 id="visitor">Visitor</h3>
<p>Visitor가 하는 역할은 데이터 구조 내의 각각의 구체적인 요소에 visit 메소드를 선언하는 것이다.
실제로 처리를 하는 메소드는 ConcreteVisitor에서 다루고 있다.</p>

<h3 id="concretevisitor">ConcreteVisitor</h3>
<p>ConcreteVisitor는 Visitor 역할의 인페이스를 구현하는 역할을 한다. visit이라는 형태의 메소드를 구현하고 각각의 ConcreteAcceptor 역할의 처리를 기술한다.</p>

<h3 id="acceptor">Acceptor</h3>
<p>Acceptor는 Visitor 역할이 방문할 곳을 나타내는 역할을 하고 있다. 방문자를 받아들이는 accept 메소드를 선언한다. accept 메소드의 인수로는 Visitor의 역할이 넘겨진다.</p>

<h3 id="concreteacceptor">ConcreteAcceptor</h3>
<p>ConcreteAcceptor는 Acceptor 역할의 인터페이스를 구현하는 역할을 한다.</p>

<h3 id="objectstructure">ObjectStructure</h3>
<p>ObjectStructure는 Acceptor 역할의 집합을 취급하는 역할을 한다.</p>

<h3 id="예제">예제</h3>
<p>#####Element 인터페이스</p>
<pre><code class="language-Java">/*
 * Element.java
 *
 * version 1.0
 *
 * 2017-12-26
 *
 * Copyright 1996 - 2017 hibrain.net All rights reserved.
 */

package io.hibrain.tutorial.designpattern.visitor;

public interface Element {
    public void accept(Visitor visitor);
}
</code></pre>
<p>대상 객체 클래스들이 방문자를 허용해야 하므로 그 방문자 객체를 받아들인다는 의미의 인터페이스를 작성한다.</p>

<p><br /></p>

<p>#####Cart 클래스</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
 * Cart.java
 *
 * version 1.0
 *
 * 2017-12-26
 *
 * Copyright 1996 - 2017 hibrain.net All rights reserved.
 */</span>

<span class="kn">package</span> <span class="n">io</span><span class="o">.</span><span class="na">hibrain</span><span class="o">.</span><span class="na">tutorial</span><span class="o">.</span><span class="na">designpattern</span><span class="o">.</span><span class="na">visitor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Cart</span> <span class="kd">implements</span> <span class="n">Element</span> <span class="o">{</span>
    <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Element</span><span class="o">&gt;</span> <span class="n">cart</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Element</span><span class="o">&gt;();</span>

    <span class="kd">public</span> <span class="nf">Cart</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">cart</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Fruits</span><span class="o">());</span>
        <span class="n">cart</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Milk</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">accept</span><span class="o">(</span><span class="n">Visitor</span> <span class="n">visitor</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Cart가 준비되었습니다"</span><span class="o">);</span>
        <span class="n">visitor</span><span class="o">.</span><span class="na">visit</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>

        <span class="k">for</span> <span class="o">(</span><span class="n">Element</span> <span class="n">element</span> <span class="o">:</span> <span class="n">cart</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">element</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">visitor</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>생성자에서 나머지 객체들을 멤버 자료구조에 추가하고 accept() 메소드를 구현한다.</p>

<p><br /></p>

<p>#####Fruits 클래스</p>
<pre><code class="language-Java">/*
 * Fruits.java
 *
 * version 1.0
 *
 * 2017-12-26
 *
 * Copyright 1996 - 2017 hibrain.net All rights reserved.
 */

package io.hibrain.tutorial.designpattern.visitor;

public class Fruits implements Element{

    @Override
    public void accept(Visitor visitor) {
        System.out.println("과일이 준비되었습니다");
        visitor.visit(this);
    }
}
</code></pre>

<p><br /></p>

<p>#####Milk 클래스</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
 * Milk.java
 *
 * version 1.0
 *
 * 2017-12-26
 *
 * Copyright 1996 - 2017 hibrain.net All rights reserved.
 */</span>

<span class="kn">package</span> <span class="n">io</span><span class="o">.</span><span class="na">hibrain</span><span class="o">.</span><span class="na">tutorial</span><span class="o">.</span><span class="na">designpattern</span><span class="o">.</span><span class="na">visitor</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Milk</span> <span class="kd">implements</span> <span class="n">Element</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">accept</span><span class="o">(</span><span class="n">Visitor</span> <span class="n">visitor</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"우유가 준비되었습니다"</span><span class="o">);</span>
        <span class="n">visitor</span><span class="o">.</span><span class="na">visit</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><br /></p>

<p>#####Visitor 인터페이스</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
 * Visitor.java
 *
 * version 1.0
 *
 * 2017-12-26
 *
 * Copyright 1996 - 2017 hibrain.net All rights reserved.
 */</span>

<span class="kn">package</span> <span class="n">io</span><span class="o">.</span><span class="na">hibrain</span><span class="o">.</span><span class="na">tutorial</span><span class="o">.</span><span class="na">designpattern</span><span class="o">.</span><span class="na">visitor</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Visitor</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visit</span><span class="o">(</span><span class="n">Cart</span> <span class="n">cart</span><span class="o">);</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visit</span><span class="o">(</span><span class="n">Fruits</span> <span class="n">fruits</span><span class="o">);</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visit</span><span class="o">(</span><span class="n">Milk</span> <span class="n">milk</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>
<p>아래에 Cart, Fruits, Milk의 visit() 메소드에 각각 객체들 자신을 담아서 던지고 있으므로 인터페이스에서 이를 정의해준다. 동일한 visit() 메소드지만 overloading을 이용해서 서로 다른 객체를 처리한다.</p>

<p><br /></p>

<p>#####Shopper 클래스</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
 * Shopper.java
 *
 * version 1.0
 *
 * 2017-12-26
 *
 * Copyright 1996 - 2017 hibrain.net All rights reserved.
 */</span>

<span class="kn">package</span> <span class="n">io</span><span class="o">.</span><span class="na">hibrain</span><span class="o">.</span><span class="na">tutorial</span><span class="o">.</span><span class="na">designpattern</span><span class="o">.</span><span class="na">visitor</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Shopper</span> <span class="kd">implements</span> <span class="n">Visitor</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visit</span><span class="o">(</span><span class="n">Cart</span> <span class="n">cart</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Cart를 이용합니다."</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visit</span><span class="o">(</span><span class="n">Fruits</span> <span class="n">fruits</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"과일을 넣었습니다"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visit</span><span class="o">(</span><span class="n">Milk</span> <span class="n">milk</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"우유를 넣었습니다"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Visitor 인터페이스를 구현한 클래스다. Visitor 인터페이스에서 오버로딩으로 정의했기 때문에 이를 구현할 Shopper 클래스에서도 각 객체타입마다 visit() 메소드를 정의했다. visit() 메소드에 담겨 호출되는 객체의 종류에 따라서 자각기 다른 visit()이 호출된다.</p>

<p><br /></p>

<p>#####Main 클래스</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
 * HBNMain.java
 *
 * version 1.0
 *
 * 2017-12-26
 *
 * Copyright 1996 - 2017 hibrain.net All rights reserved.
 */</span>

<span class="kn">package</span> <span class="n">io</span><span class="o">.</span><span class="na">hibrain</span><span class="o">.</span><span class="na">tutorial</span><span class="o">.</span><span class="na">designpattern</span><span class="o">.</span><span class="na">visitor</span><span class="o">;</span>

<span class="cm">/**
 *
 * @author 우성민
 * @version 1.0
 */</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HBNMain</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Shopper</span> <span class="n">shopper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Shopper</span><span class="o">();</span>
        <span class="n">Cart</span> <span class="n">cart</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Cart</span><span class="o">();</span>
        <span class="n">cart</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">shopper</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>##실행 결과</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Cart가 준비되었습니다

Cart를 이용합니다

과일이 준비되었습니다

과일을 넣었습니다

우유가 준비되었습니다

우유를 넣었습니다
</code></pre></div></div>

<p>cart의 accept() 메소드에 비지터를 구현한 shopper를 던진다.
cart의 accept() 메소드에서는 cart 자신의 객체를 담아 전달한다.
다시 Shopper 클래스로 와서 visit(Cart cart)을 실행하고
나머지 카트에 담겨진 Fruits와 Milk은 위에서 받은 visitor를 이용해
Fruits.accept(visitor)가 실행되고 호출한 Visitor 클래스 내의 visit(Fruits fruits)메소드를 실행, Milk.accept(visitor)가 실행되서 호출한 Visitor 클래스 내의 visit(Milk milk)메소드를 실행한다.</p>

<h1 id="참고자료">참고자료</h1>
<p>Java 언어로 배우는 디자인 패턴, Yuki Hiroshi ,2001
http://techbard.tistory.com/2869</p>

  </div>

  <div>

    
    <span class="w3-margin-bottom">
      <i class="fa fa-tags" aria-hidden="true"></i>
    
      
    <a href="/tags/연구노트"><code class=""><nobr>연구노트</nobr></code>&nbsp;</a>
    
      
    <a href="/tags/인턴십"><code class=""><nobr>인턴십</nobr></code>&nbsp;</a>
    
  </span>
    

    <br><br>

    <div class="w3-padding-24 w3-border-top w3-border-bottom w3-margin-bottom">
      <a class="post-meta" href="/authors/sm.woo">
  <div class="w3-bar">

    
    <i class="fa fa-user fa-4x w3-bar-item w3-circle " aria-hidden="true"> </i>
    

    <div class="w3-bar-item">
      <span class="w3-large w3-text-black">우성민</span><br>
      <span class="w3-medium w3-text-black">하이브레인넷 인턴</span>
    </div>
  </div>
</a>
    </div>
    <div class="share-page w3-right w3-margin-bottom">
    <a class="w3-button w3-tiny w3-padding-small w3-text-white w3-round" style="height : 20px; background-color: #1da1f2" href="https://twitter.com/intent/tweet?text=Visitor Pattern&url=http://blog.hibrainapps.net/2017/12/26/%EC%9A%B0%EC%84%B1%EB%AF%BC.html&via=&related=" rel="nofollow" target="_blank" title="Share on Twitter"><i class="fa fa-twitter" aria-hidden="true"> <b>트윗</b> </i></a>
    <a class="w3-button w3-tiny w3-padding-small w3-text-white w3-round" style="height : 20px; background-color: #dd4b39" href="https://plus.google.com/share?url=http://blog.hibrainapps.net/2017/12/26/%EC%9A%B0%EC%84%B1%EB%AF%BC.html" rel="nofollow" target="_blank" title="Share on Google+"><i class="fa fa-google-plus" aria-hidden="true"> <b>공유하기</b></i></a>
    <div class="fb-like" data-href="http://blog.hibrainapps.net" data-layout="button_count" data-action="like" data-size="small" data-show-faces="false" data-share="true"></div>
</div>


  </div>

  



  



  
<div class="fb-comments" data-href="http://blog.hibrainapps.net/2017/12/26/%EC%9A%B0%EC%84%B1%EB%AF%BC.html" data-width="100%" ></div>

<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = http://blog.hibrainapps.net/2017/12/26/%EC%9A%B0%EC%84%B1%EB%AF%BC.html  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/

var disqus_shortname = 'hibrainappsblog';

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//' + 'disqus_shortname' + '.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript
>



</article>
      </div>
    </main>

    <footer class="w3-container w3-padding-32 w3-center w3-opacity w3-light-grey w3-xlarge">
  <span class="w3-large">하이브레인넷 부설연구소</span>
  <br>

  <a href="https://www.facebook.com/하이브레인넷-부설연구소-488747181169148/"><i class="fa fa-facebook-official w3-hover-opacity"></i></a>
  <a href="https://twitter.com/hibrainnet"><i class="fa fa-twitter w3-hover-opacity"></i></a>
  <a href="http://blog.hibrainapps.net"><i class="fa fa-github w3-hover-opacity"></i></a>
  <a href="mailto:apps@hibrain.net"><i class="fa fa-envelope-o w3-hover-opacity"></i></a>

  <p class="w3-medium"><a href="https://hibrain.net/" target="_blank">hibrain.net </a>All rights reserved.</p>
</footer>



    <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/ko_KR/sdk.js#xfbml=1&version=v2.11&appId=1953364611586334';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

  </body>

</html>
