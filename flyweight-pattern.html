<!DOCTYPE html>
<html lang="en">

  <script language='javascript'>
var url = 'http://blog.hibrainapps.net'+''
var pageType = '-1';
var typeValue = '-1';

function getTypeValue(){

    var hashes = window.location.href.slice(0, window.location.href.indexOf('?')).split('/');
    var pageNum = getParameter('page');

    if(hashes.length == 7 && ( hashes[4] == 'tags' || hashes[4] == 'category' ) && pageNum != undefined) {
      pageType = hashes[4];
      typeValue = hashes[5];
      window.location.replace(url + '/' + pageType + '/' + typeValue + '/page/' + pageNum);
    }

    if(hashes.length == 5 && pageNum != undefined) {
      pageType = hashes[4];
      typeValue = hashes[5];
      window.location.replace(url + '/page/' + pageNum);
    }

}


function getParameter(param) {
    var returnValue;
    var url = location.href;
    var parameters = (url.slice(url.indexOf('?') + 1, url.length)).split('&');
    for (var i = 0; i < parameters.length; i++) {
        var varName = parameters[i].split('=')[0];
        if (varName.toUpperCase() == param.toUpperCase()) {
            returnValue = parameters[i].split('=')[1];
            return decodeURIComponent(returnValue);
        }
    }
};

getTypeValue();
</script>
<head>


  <meta name="google-site-verification" content="QV72Qd0YOcS2xQ5zCzzQ-IKBHBor7lGSG3LBFmbE6Eo" />

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="fb:app_id" content="147895112528926" />
  <meta property="fb:admins" content="100001627773972"/>
  <title>Flyweight Pattern</title>
  <meta name="description" content="1. 연구내용3 Flyweight Pattern 정의 플라이웨이트 패턴은 동일하거나 유사한 객체들이 데이터를 서로 공유하도록 하여 메모리 사용량을 최소화 하는 디자인 패턴이다. 보통 많은 객체들을 생성해야 할때 객체의 생성 및 관리를 담당하는 객체를 따로 두고 사용한다.">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://blog.hibrainapps.net/flyweight-pattern">
  <link rel="alternate" type="application/rss+xml" title="하이브레인넷 부설연구소" href="/feed.xml">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-18071244-5', 'auto');
  ga('send', 'pageview');

</script>
  

  

</head>


  <body>

    <header class="site-header" role="banner">

  <div class="w3-top">
    <div class="w3-bar w3-white w3-card " style="letter-spacing:4px;">
    
    
    <a class="w3-bar-item site-title w3-mobile" href="/">하이브레인넷 부설연구소</a>

	<!--search bar and button-->
	<form class="w3-bar-item w3-right w3-mobile" action="http://blog.hibrainapps.net/result/">
		 <input class="w3-input w3-bar-item w3-xlarge" id="q" name="q" type="text" placeholder="검색">
		  <input type="hidden" name="filter" value="0" />
         <button class="w3-button w3-xlarge w3-bar-item"><i class="fa fa-search" aria-hidden="true"></i></button>
	</form>

    
      <nav class="site-nav w3-bar-item">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
	    
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          <a class="page-link w3-wide" href="/index/">홈</a>
          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          <a class="page-link w3-wide" href="/tags/">태그</a>
          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          <a class="page-link w3-wide" href="/guestbook/">방명록</a>
          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
        
        

          
          
        </div>
      </nav>


    
  </div>

</div>

</header>

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    

    <h1 class="post-title" itemprop="name headline">Flyweight Pattern</h1>
    <p class="post-meta">
      <time datetime="2017-12-27T06:33:33+00:00" itemprop="datePublished">
        
        <span class="post-meta w3-text-grey"><i class="fa fa-clock-o" aria-hidden="true"></i> 2017.12.27</span>
      </time>
  </header>

  <div class="post-content" itemprop="articleBody">
    <h1 id="1-연구내용3">1. 연구내용3</h1>
<hr />
<h2 id="flyweight-pattern">Flyweight Pattern</h2>
<h3 id="정의">정의</h3>
<p>플라이웨이트 패턴은 동일하거나 유사한 객체들이 데이터를 서로 공유하도록 하여 메모리 사용량을 최소화 하는 디자인 패턴이다.
보통 많은 객체들을 생성해야 할때 객체의 생성 및 관리를 담당하는 객체를 따로 두고 사용한다.</p>

<h3 id="예제">예제</h3>
<p>예제로 사용할 상황은 커피를 주문하는 상황이다.
카페에서 커피를 주문할때, 아메리카노, 카푸치노, 라떼 등 여러가지 커피들이 주문된다. 커피들이 객체라고 생각했을때 커피가 팔린 갯수 만큼 객체들이 만들어져야 할 것이다.
하지만 커피라는 유사성이 있기때문에 같은 부분을 공유하도록 할 수 있다.</p>

<p>아래의 그림은 클래스 uml을 표현한 그림이다.</p>

<p><img src="https://image.ibb.co/c7y7jw/uml.png" alt="uml 사진" />
<br /><br /></p>

<h3 id="coffeeorder-인터페이스">CoffeeOrder 인터페이스</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public interface CoffeeOrder {
    public void serveCoffee(CoffeeOrderContext context);
}
</code></pre></div></div>
<p>CoffeeOrder 인터페이스는 커피주문이 가지는 공통점을 표현한것이다.
serveCoffee 메소드는 CoffeeOrderContext 형으로 주문받은 테이블 정보를 가지고 커피를 서빙하는 메소드이다.</p>

<h3 id="coffeeflavor-클래스">CoffeeFlavor 클래스</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public class CoffeeFlavor implements CoffeeOrder {
    private final String flavor;

    public CoffeeFlavor(String newFlavor) {
        this.flavor = newFlavor;
    }

    public String getFlavor() {
        return this.flavor;
    }

    public void serveCoffee(CoffeeOrderContext context) {
        System.out.println(flavor + " " + context.getTable() + "번 테이블로");
    }
}
</code></pre></div></div>
<p>CoffeeFlavor 클래스는 ConffeeOrder를 구현하고 있다.
newFlavor 문자열을 입력받아 각 커피의 고유맛을 표현하고 있다.
그리고 serveCoffee를 구현하여 테이블로 서빙되는 방식을 구현하고 있다.</p>

<h3 id="coffeeordercontext-클래스">CoffeeOrderContext 클래스</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public class CoffeeOrderContext {
    private final int tableNumber;

    public CoffeeOrderContext(int tableNumber) {
        this.tableNumber = tableNumber;
    }

    public int getTable() {
        return this.tableNumber;
    }
}
</code></pre></div></div>
<p>CoffeeOrderContext 클래스는 주문한 테이블의 정보를 담고 있는 클래스이다.
int형 tableNumber 변수를 파라미터로 하는 생성자가 있다.</p>

<h3 id="coffeeflavorfactory-클래스">CoffeeFlavorFactory 클래스</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public class CoffeeFlavorFactory {
    private Map&lt;String, CoffeeFlavor&gt; flavors = new HashMap&lt;String, CoffeeFlavor&gt;();

    public CoffeeFlavor getCoffeeFlavor(String flavorName) {
        CoffeeFlavor flavor = flavors.get(flavorName);
        if (flavor == null) {
            flavor = new CoffeeFlavor(flavorName);
            flavors.put(flavorName, flavor);
        }
        return flavor;
    }

    public int getTotalCoffeeFlavorsMade() {
        return flavors.size();
    }
}
</code></pre></div></div>
<p>CoffeeFlavorFactory 클래스는 커피를 주문받아 커피를 만드는 일을 하듯이 CoffeeFlavor 객체를 생성하는 역할을 맡는다.
Map&lt;String, CoffeeFlavor&gt; flavors 를 통해 커피이름, 커피객체를 키와 밸류값으로 저장한다.
getCoffeeFlavor 메소드는 파라미터로 받은 flavorName이 맵에 있는 경우 커피맛 객체를 리턴해주고 없는 경우는 새로운 커피맛 객체를 생성하여 맵에 저장후 리턴해주게 된다.
위와 같이 객체를 주문 받을때마다 생성하지 않고 맵을 활용하여 생성했던 객체는 저장후 공유하여 쓸수 있는것을 볼수 있다.</p>

<h3 id="main-클래스">Main 클래스</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public class HBMain {
    private static CoffeeFlavor[] flavors = new CoffeeFlavor[100];
    private static CoffeeOrderContext[] tables = new CoffeeOrderContext[100];
    private static int ordersMade = 0;
    private static CoffeeFlavorFactory flavorFactory;

    public static void takeOrders(String flavorIn, int table) {
        flavors[ordersMade] = flavorFactory.getCoffeeFlavor(flavorIn);
        tables[ordersMade++] = new CoffeeOrderContext(table);
    }

    public static void main(String[] args) {
        flavorFactory = new CoffeeFlavorFactory();

        takeOrders("아메리카노", 2);
        takeOrders("아메리카노", 2);
        takeOrders("카푸치노", 1);
        takeOrders("카푸치노", 1);
        takeOrders("라떼", 1);
        takeOrders("카라멜 마끼야또", 897);
        takeOrders("아메리카노", 97);
        takeOrders("아메리카노", 97);
        takeOrders("카라멜 마끼야또", 3);
        takeOrders("에스프레소", 3);
        takeOrders("아메리카노", 3);
        takeOrders("카라멜 마끼야또", 96);
        takeOrders("에스프레소", 552);
        takeOrders("아메리카노", 121);
        takeOrders("에스프레소", 121);

        for (int i = 0; i &lt; ordersMade; ++i) {
            flavors[i].serveCoffee(tables[i]);
        }
        System.out.println(" ");
        System.out.println("생성된 CoffeeFlavor 객체 : " + flavorFactory.getTotalCoffeeFlavorsMade());
    }
}
</code></pre></div></div>

<p>Main 클래스는 커피맛 객체를 저장할 flavors, 주문 정보를 저장할 tables, 주문번호를 저장할 orderMade, 커피 객체를 생성할 flavorsFactory를 변수를 가지고 있다.
그리고 takeOrders 메소드는 flavorFactory를 이용하여 객체를 생성 및 관리 하고 주문번호를 증가시킨다.</p>

<h3 id="실행결과">실행결과</h3>

<p><img src="https://image.ibb.co/i3sQuw/image.png" alt="실행결과" /></p>

<h1 id="2-참고자료">2. 참고자료</h1>

<ol>
  <li>
    <p>flyweight pattern, https://ko.wikipedia.org/wiki/%ED%94%8C%EB%9D%BC%EC%9D%B4%EC%9B%A8%EC%9D%B4%ED%8A%B8_%ED%8C%A8%ED%84%B4</p>
  </li>
  <li>
    <p>flyweight 패턴, https://zetawiki.com/wiki/Flyweight_%ED%8C%A8%ED%84%B4</p>
  </li>
</ol>

  </div>

  <div>

    
    <span class="w3-margin-bottom">
      <i class="fa fa-tags" aria-hidden="true"></i>
    
      
    <a href="/tags/연구노트"><code class=""><nobr>연구노트</nobr></code>&nbsp;</a>
    
      
    <a href="/tags/인턴십"><code class=""><nobr>인턴십</nobr></code>&nbsp;</a>
    
  </span>
    

    <br><br>

    <div class="w3-padding-24 w3-border-top w3-border-bottom w3-margin-bottom">
      <a class="post-meta" href="/authors/jh.heo">
  <div class="w3-bar">

    
    <i class="fa fa-user fa-4x w3-bar-item w3-circle " aria-hidden="true"> </i>
    

    <div class="w3-bar-item">
      <span class="w3-large w3-text-black">허주한</span><br>
      <span class="w3-medium w3-text-black">하이브레인넷 인턴</span>
    </div>
  </div>
</a>
    </div>
    <div class="share-page w3-right w3-margin-bottom">
    <a class="w3-button w3-tiny w3-padding-small w3-text-white w3-round" style="height : 20px; background-color: #1da1f2" href="https://twitter.com/intent/tweet?text=Flyweight Pattern&url=http://blog.hibrainapps.net/flyweight-pattern&via=&related=" rel="nofollow" target="_blank" title="Share on Twitter"><i class="fa fa-twitter" aria-hidden="true"> <b>트윗</b> </i></a>
    <a class="w3-button w3-tiny w3-padding-small w3-text-white w3-round" style="height : 20px; background-color: #dd4b39" href="https://plus.google.com/share?url=http://blog.hibrainapps.net/flyweight-pattern" rel="nofollow" target="_blank" title="Share on Google+"><i class="fa fa-google-plus" aria-hidden="true"> <b>공유하기</b></i></a>
    <div class="fb-like" data-href="http://blog.hibrainapps.net" data-layout="button_count" data-action="like" data-size="small" data-show-faces="false" data-share="true"></div>
</div>


  </div>

  



  



  
<div class="fb-comments" data-href="http://blog.hibrainapps.net/flyweight-pattern" data-width="100%" ></div>

<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = http://blog.hibrainapps.net/flyweight-pattern  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/

var disqus_shortname = 'hibrainappsblog';

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//' + 'disqus_shortname' + '.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript
>



</article>
      </div>
    </main>

    <footer class="w3-container w3-padding-32 w3-center w3-opacity w3-light-grey w3-xlarge">
  <span class="w3-large">하이브레인넷 부설연구소</span>
  <br>

  <a href="https://www.facebook.com/하이브레인넷-부설연구소-488747181169148/"><i class="fa fa-facebook-official w3-hover-opacity"></i></a>
  <a href="https://twitter.com/hibrainnet"><i class="fa fa-twitter w3-hover-opacity"></i></a>
  <a href="http://blog.hibrainapps.net"><i class="fa fa-github w3-hover-opacity"></i></a>
  <a href="mailto:apps@hibrain.net"><i class="fa fa-envelope-o w3-hover-opacity"></i></a>

  <p class="w3-medium"><a href="https://hibrain.net/" target="_blank">hibrain.net </a>All rights reserved.</p>
</footer>



    <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/ko_KR/sdk.js#xfbml=1&version=v2.11&appId=1953364611586334';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

  </body>

</html>
